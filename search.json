---
layout: null
permalink: /search.json
---
[
{% assign posts = site.posts | where_exp: "p", "p.draft != true" %}
{% for post in posts %}
  {
    "title": {{ post.title | jsonify }},
    "url": "{{ post.url | relative_url }}",
    "date": "{{ post.date | date_to_xmlschema }}",
    "description": {{ post.description | default: "" | jsonify }},
    "tags": [{% for t in post.tags %}{{ t | jsonify }}{% unless forloop.last %}, {% endunless %}{% endfor %}],
    "emotions": [{% if post.emotions %}{% for e in post.emotions %}{{ e | downcase | jsonify }}{% unless forloop.last %}, {% endunless %}{% endfor %}{% endif %}],
    "content": {{ post.content | strip_html | normalize_whitespace | jsonify }}
  }{% unless forloop.last %},{% endunless %}
{% endfor %}
]
